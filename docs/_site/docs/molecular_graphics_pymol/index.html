<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Molecular Graphics in PyMOL</title>
    <meta name="description" content="">


    <link rel="stylesheet" href="/chap/css/main.css">
    <link rel="stylesheet" href="/chap/css/font-awesome.min.css">

    <link rel="shortcut icon" href="/chap/favicon.ico?1">
    <!-- Begin Jekyll SEO tag v2.2.2 -->
<title>Molecular Graphics in PyMOL | CHAP</title>
<meta property="og:title" content="Molecular Graphics in PyMOL" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/chap/docs/molecular_graphics_pymol/" />
<meta property="og:url" content="http://localhost:4000/chap/docs/molecular_graphics_pymol/" />
<meta property="og:site_name" content="CHAP" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-02-15T21:33:50+00:00" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"Molecular Graphics in PyMOL","datePublished":"2018-02-15T21:33:50+00:00","dateModified":"2018-02-15T21:33:50+00:00","url":"http://localhost:4000/chap/docs/molecular_graphics_pymol/"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="canonical" href="http://localhost:4000/chap/docs/molecular_graphics_pymol/">
    <link rel="alternate" type="application/rss+xml" title="CHAP" href="http://localhost:4000/chap/feed.xml" />
</head>


<body>

    <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container navbar-container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
            <a class="navbar-brand" href="/chap/">
                <span><img src="/chap/img/logonav.png"></span> CHAP
            </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li  class="active" ><a href="/chap/docs/home/">Documentation</a></li>
                <li ><a href="/chap/publications.html">Publications</a></li>
                <li ><a href="/chap/blog/2018/01/26/chap-at-bps/">News</a></li>
                <li ><a href="/chap/aboutus.html">About Us</a></li>
            </ul>
            <div class="navbar-right">
                <form class="navbar-form navbar-left">
                    <div class="form-group has-feedback">
                        <input id="search-box" type="text" class="form-control" placeholder="Search...">
                        <i class="fa fa-search form-control-feedback"></i>
                    </div>
                </form>
                <ul class="nav navbar-nav">
                    <li><a href=""><i class="fa fa-github" aria-hidden="true"></i></a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>



    <div class="page-content">
        <div class="wrapper">
            <div class="container">
    <div class="row">
        <div class="col-md-4">
          <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">

  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-1" aria-expanded="false" aria-controls="collapse-1">
          Getting Started
        </a>
      </h4>
    </div>
    <div id="collapse-1" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/chap/docs/home/">What CHAP Can Do</a>
        
          
          
          <a class="list-group-item " href="/chap/docs/installing_chap/">Installing CHAP</a>
        
          
          
          <a class="list-group-item " href="/chap/docs/annotation_example/">Annotation Example</a>
        
      </ul>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-2" aria-expanded="false" aria-controls="collapse-2">
          Running CHAP
        </a>
      </h4>
    </div>
    <div id="collapse-2" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/chap/docs/chap_workflow/">Overview of CHAP Workflow</a>
        
          
          
          <a class="list-group-item " href="/chap/docs/input_parameters/">Input Parameters</a>
        
      </ul>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-3" aria-expanded="false" aria-controls="collapse-3">
          Understanding Output
        </a>
      </h4>
    </div>
    <div id="collapse-3" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/chap/docs/overview_output/">Overview of Output Files</a>
        
          
          
          <a class="list-group-item " href="/chap/docs/contents_json_file/">Contents of the JSON Output File</a>
        
          
          
          <a class="list-group-item " href="/chap/docs/contents_pdb_file/">Contents of the PDB Output File</a>
        
          
          
          <a class="list-group-item " href="/chap/docs/contents_objmtl_file/">Contents of the OBJ and MTL Output Files</a>
        
      </ul>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-4" aria-expanded="false" aria-controls="collapse-4">
          Visualising Results
        </a>
      </h4>
    </div>
    <div id="collapse-4" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/chap/docs/plotting_python/">Plotting in Python</a>
        
          
          
          <a class="list-group-item " href="/chap/docs/plotting_r/">Plotting in R</a>
        
          
          
          <a class="list-group-item active" href="/chap/docs/molecular_graphics_pymol/">Molecular Graphics in PyMOL</a>
        
          
          
          <a class="list-group-item " href="/chap/docs/molecular_graphics_vmd/">Molecular Graphics in VMD</a>
        
      </ul>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-5" aria-expanded="false" aria-controls="collapse-5">
          Data Sources
        </a>
      </h4>
    </div>
    <div id="collapse-5" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/chap/docs/vdw_radii/">Van der Waals Radii</a>
        
          
          
          <a class="list-group-item " href="/chap/docs/hydrophobicity_scales/">Hydrophobicity Scales</a>
        
          
          
          <a class="list-group-item " href="/chap/docs/colour_palettes/">Colour Palettes</a>
        
      </ul>
    </div>
  </div>

</div>

        </div>

        <div class="col-md-8">
            <h1>Molecular Graphics in PyMOL</h1>
            <div id="markdown-content-container">
<p>CHAP writes a triangle mesh representation of the computed pore surface to a <a href="http://www.fileformat.info/format/wavefrontobj/egff.htm">Wavefront OBJ file</a>. Unfortunately, <a href="https://pymol.org/2/">PyMOL</a> does not natively support the import of Wavefront OBJ meshes, which is why CHAP comes bundled with Python code that supports reading OBJ files and rendering them as <a href="https://pymolwiki.org/index.php/Category:CGO">compiled graphics objects</a>. CHAP also provides a turnkey Python script for visualising the permeation pathway together with the channel protein.</p>

<h2 id="loading-and-displaying-obj-files">Loading and Displaying OBJ Files</h2>

<p>The code for loading and displaying OBJ files can be found in the file <code class="highlighter-rouge">wobj.py</code>, which is located under <code class="highlighter-rouge">chap/scripts/visualisation/PyMOL/</code> in your CHAP install directory. Assuming that you copied <code class="highlighter-rouge">wobj.py</code> to your working directory, it can be imported into PyMOL via</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">wobj.py</span> <span class="kn">as</span> <span class="nn">wobj</span>
</code></pre>
</div>

<p>and exposes the functions <code class="highlighter-rouge">import_wobj(filename)</code> and <code class="highlighter-rouge">draw_wobj(obj, groupname)</code>.</p>

<p>The first of these can be used to load an OBJ file, which will be returned as a dictionary of compiled graphics objects (CGO), where each entry represents one group of faces loaded from the OBJ file, with the group names used as keys. The second function can subsequently be used to actually draw the pathway. So to display the permeation pathway coloured by solvent density, you would write:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="c"># load mesh data from file:</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">wobj</span><span class="o">.</span><span class="n">import_wobj</span><span class="p">(</span><span class="s">"output.obj"</span><span class="p">)</span>

<span class="c"># display surface:</span>
<span class="n">wobj</span><span class="o">.</span><span class="n">draw_wobj</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">groupname</span> <span class="o">=</span> <span class="s">"avg_density"</span><span class="p">)</span>
</code></pre>
</div>

<p>To see which groupnames are available, simply type <code class="highlighter-rouge">obj.keys()</code>. Note that the groupname argument to <code class="highlighter-rouge">draw_obj("output.obj")</code> is optional - if no groupname is specified, all groups will be drawn simultaneously and you can use the PyMOL GUI to hide and show the different surfaces.</p>

<h2 id="turnkey-visualisation-script">Turnkey Visualisation Script</h2>

<p>Under <code class="highlighter-rouge">chap/scripts/visualisation/PyMOL/</code> you can also find the Python script <code class="highlighter-rouge">visualise_pathway.py</code>, which will load both the <code class="highlighter-rouge">output.pdb</code> and <code class="highlighter-rouge">output.obj</code> files produced by CHAP to create a cartoon representation of the channel with the pore-lining and pore-facing residues additionally shown as sticks. This script will then use the functions defined in <code class="highlighter-rouge">wobj.py</code> to add the permeation pathway surface to the molecular visualisation. Therefore, if you want to use this script, you need to make sure that <code class="highlighter-rouge">wobj.py</code> is located either in your working directory or in the same location as <code class="highlighter-rouge">visualise_pathway.py</code>.</p>

<p>Assuming that you copied both scripts to your working directory, you can run the script either from within PyMOL by typing</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="n">run</span> <span class="n">visualise_pathway</span><span class="o">.</span><span class="n">py</span>
</code></pre>
</div>

<p>or by passing it to the PyMOL start-up command:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>pymol -r visualise_pathway.py --
</code></pre>
</div>

<p>Note that the two dashes are necessary for PyMOL to properly pass arguments to <code class="highlighter-rouge">visualise_pathway.py</code> even if no arguments are explicitly given.</p>

<p>By default, <code class="highlighter-rouge">visualise_pathway.py</code> assumes that the input files are named <code class="highlighter-rouge">output.pdb</code> and output <code class="highlighter-rouge">output.obj</code> and will produce one surface for each group in the OBJ file. When invoking the script from the command line, you can change this behaviour by passing named arguments after the double dash:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>pymol -r visualise_pathway.py -- -structure custom.pdb -surface custom.obj -property avg_density
</code></pre>
</div>
</div>
            <p class="text-center">
              <br />
              <a target="_blank" href="/_docs/visualising-results/molecular_graphics_pymol.md" class="btn btn-default githubEditButton" role="button">
                <i class="fa fa-pencil fa-lg"></i> Improve this page
              </a>
            </p>
            <hr>
            





  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    <ul class="pager">
      
        
        
        <li class="previous">
          <a href="/chap/docs/plotting_r/">
            <span aria-hidden="true">&larr;</span> Previous
          </a>
        </li>
      

      
        
        
        <li class="next">
          <a href="/chap/docs/molecular_graphics_vmd/">
            Next <span aria-hidden="true">&rarr;</span>
          </a>
        </li>
      
    </div>
    <div class="clear"></div>
    

        </div>

    </div>
</div>

        </div>
    </div>

    <footer class="footer">
    <div class="container">

        <p class="text-center">
            CHAP 2018 |
            Powered by <a href="https://github.com/aksakalli/jekyll-doc-theme">Jekyll Doc Theme</a>
        </p>
        <!-- <p class="text-muted">Place sticky footer content here.</p> -->
    </div>
</footer>

    <script>
  var baseurl = '/chap'
</script>
<script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="/chap/js/bootstrap.min.js "></script>
<script src="/chap/js/typeahead.bundle.min.js "></script>

<script src="/chap/js/main.js "></script>

</body>

</html>
